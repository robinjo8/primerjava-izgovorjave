<!DOCTYPE html>
<html lang="sl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöó Profesionalna govorna vaja - Najstro≈æja ocena</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            text-align: center;
        }
        
        .container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            margin: 20px 0;
        }
        
        h1 {
            color: white;
            font-size: 32px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            margin-bottom: 30px;
        }
        
        .slika {
            max-width: 300px;
            max-height: 300px;
            width: 100%;
            height: auto;
            border: 4px solid #2196F3;
            border-radius: 15px;
            margin: 20px auto;
            transition: transform 0.3s ease;
            display: block;
        }
        
        .slika:hover { transform: scale(1.05); }
        
        .beseda {
            font-size: 36px;
            color: #2196F3;
            font-weight: bold;
            margin: 20px 0;
            letter-spacing: 2px;
        }
        
        .glasovi {
            font-size: 24px;
            color: #666;
            margin: 15px 0;
            font-family: monospace;
            background: #f5f5f5;
            padding: 10px;
            border-radius: 8px;
        }
        
        .gumb {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 18px 35px;
            font-size: 20px;
            border-radius: 25px;
            cursor: pointer;
            margin: 20px;
            transition: all 0.3s ease;
            font-weight: bold;
        }
        
        .gumb:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
        }
        
        .gumb:disabled {
            background: #cccccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .status {
            font-size: 18px;
            margin: 20px 0;
            min-height: 25px;
            font-weight: bold;
        }
        
        .snemanje {
            color: #f44336;
            animation: blink 1s infinite;
        }
        
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.5; }
        }
        
        .povratna {
            font-size: 16px;
            padding: 15px;
            margin: 20px 0;
            border-radius: 10px;
            min-height: 20px;
            font-weight: bold;
        }
        
        .uspeh {
            background: #d4edda;
            color: #155724;
            border: 3px solid #28a745;
            animation: bounce 0.6s ease;
        }
        
        .spodbuda {
            background: #fff3cd;
            color: #856404;
            border: 3px solid #ffc107;
        }
        
        .pomoc {
            background: #cce7ff;
            color: #004085;
            border: 3px solid #007bff;
        }
        
        .kriticna {
            background: #ffe6e6;
            color: #8b0000;
            border: 3px solid #ff0000;
            animation: shake 0.5s ease-in-out;
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        
        .tocke {
            background: #FF9800;
            color: white;
            padding: 12px;
            border-radius: 10px;
            margin: 20px 0;
            font-size: 18px;
            font-weight: bold;
        }
        
        .gumb-mali {
            background: #2196F3;
            color: white;
            border: none;
            padding: 8px 16px;
            font-size: 14px;
            border-radius: 15px;
            cursor: pointer;
            margin: 5px;
        }
        
        .gumb-mali:hover { background: #1976D2; }
        
        .debug {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 10px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 12px;
            text-align: left;
            max-height: 300px;
            overflow-y: auto;
            display: none;
        }
        
        .alternative-info {
            background: #e3f2fd;
            border: 2px solid #2196f3;
            border-radius: 8px;
            padding: 10px;
            margin: 10px 0;
            font-size: 14px;
            text-align: left;
        }
        
        .opozorilo {
            background: #e8f5e8;
            color: #2e7d32;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            font-size: 14px;
            border: 2px solid #4caf50;
        }
        
        .tehnicno {
            background: #fff3cd;
            color: #856404;
            padding: 12px;
            border-radius: 8px;
            margin: 15px 0;
            font-size: 12px;
            border: 2px solid #ffc107;
        }
    </style>
</head>
<body>
    <h1>üöó Profesionalna govorna vaja - Najstro≈æja ocena</h1>
    
    <div class="container">
        <p><strong>Poglej sliko in povej natanƒçno, kaj vidi≈°:</strong></p>
        
        <img class="slika" 
             id="mainImage"
             src="https://i.postimg.cc/3JH3jT3S/avto.png" 
             alt="Slika avtomobila" />
        
        <div class="beseda" id="ciljnaBesedaDisplay">AVTO</div>
        <div class="glasovi" id="glasoviDisplay">A - V - T - O</div>
        
        <div class="status" id="status">Pritisni gumb in povej natanƒçno: "AVTO"</div>
        
        <button class="gumb" id="gumbGovori" onclick="zacniSnemanje()">
            üé§ Zaƒçni govoriti
        </button>
        
        <div class="povratna" id="povratna" style="display: none;"></div>
        
        <div id="alternativeInfo" class="alternative-info" style="display: none;">
            <strong>Vse prepoznane mo≈ænosti:</strong><br>
            <span id="alternativeList"></span>
        </div>
        
        <div class="tocke">
            Toƒçke: <span id="tocke">0</span> üåü
        </div>
        
        <div>
            <button class="gumb-mali" onclick="ponoviVajo()">üîÑ Znova</button>
            <button class="gumb-mali" onclick="prikaziPomoc()">üí° Pomoƒç</button>
            <button class="gumb-mali" onclick="toggleDebug()">üîß Debug</button>
            <button class="gumb-mali" onclick="nextWord()">‚û°Ô∏è Naslednja beseda</button>
        </div>
        
        <div class="debug" id="debug"></div>
        
        <div class="opozorilo">
            ‚úÖ <strong>NAJSTRO≈ΩJE profesionalno preverjanje:</strong><br>
            ‚Ä¢ Analizira VSE alternative Google Speech API<br>
            ‚Ä¢ Razlikuje med V in F (avto ‚â† afto) - tudi pri hitri izgovorjavi<br>
            ‚Ä¢ Razlikuje med ≈Ω in Z (≈æoga ‚â† zoga)<br>
            ‚Ä¢ Razlikuje med ≈† in S (≈°ola ‚â† sola)<br>  
            ‚Ä¢ Razlikuje med R in L (riba ‚â† liba)<br>
            ‚Ä¢ Upo≈°teva zaupanje Google API in podobnost besed
        </div>
        
        <div class="tehnicno">
            ‚ö†Ô∏è <strong>Tehniƒçne zahteve:</strong> Google Chrome + dovoljenje za mikrofon + internetna povezava
        </div>
    </div>

    <script>
    // ================= AVDIO PODPORA =================
    let audioPravilno = null;
    let audioNapacno = null;
    let audioEnabled = true;

    // Prilagodi URL-je glede na svojo Render domeno!
    function inicializirajAvdio() {
        audioPravilno = new Audio('https://primerjava-izgovorjave.onrender.com/audio/avto_pravilno.mp3');
        audioNapacno = new Audio('https://primerjava-izgovorjave.onrender.com/audio/avto_napacno.mp3');
        audioPravilno.preload = 'auto';
        audioNapacno.preload = 'auto';
        audioPravilno.volume = 0.7;
        audioNapacno.volume = 0.7;
        log('Avdio datoteke inicializirane');
    }

    function predvajajAvdio(tip) {
        if (!audioEnabled) return;
        if (tip === 'uspeh' && audioPravilno) {
            audioPravilno.currentTime = 0;
            audioPravilno.play().catch(e => log('Napaka pri predvajanju avdia "uspeh": ' + e.message));
        }
        if (tip === 'napaka' && audioNapacno) {
            audioNapacno.currentTime = 0;
            audioNapacno.play().catch(e => log('Napaka pri predvajanju avdia "napaka": ' + e.message));
        }
    }
    // =================================================

    // Globalne spremenljivke
    let speechRecognition = null;
    let trenutneTocke = 0;
    let ciljnaBeseda = '';
    let debugMode = false;
    let vseAlternative = [];
    
    let currentWordIndex = 0;
    const wordList = [
        { word: 'avto', image: 'https://i.postimg.cc/3JH3jT3S/avto.png' },
        { word: '≈æoga', image: 'https://via.placeholder.com/300x300/4CAF50/white?text=≈ΩOGA' },
        { word: 'riba', image: 'https://via.placeholder.com/300x300/2196F3/white?text=RIBA' },
        { word: '≈°ola', image: 'https://via.placeholder.com/300x300/FF9800/white?text=≈†OLA' },
        { word: 'ƒçebela', image: 'https://via.placeholder.com/300x300/9C27B0/white?text=ƒåEBELA' }
    ];

    // Inicializacija ob nalaganju strani
    window.onload = function() {
        log('Stran nalo≈æena - inicializacija najstro≈æjega sistema...');
        inicializirajAvdio(); // <<< DODANO: Inicializacija avdio podpore
        inicializirajGlasovnoPrepoznavanje();
        updateWordDisplay();
    };
    
    // Posodobi prikaz besede in slike
    function updateWordDisplay() {
        const currentWordData = wordList[currentWordIndex];
        ciljnaBeseda = currentWordData.word;
        
        document.getElementById('ciljnaBesedaDisplay').textContent = ciljnaBeseda.toUpperCase();
        document.getElementById('glasoviDisplay').textContent = ciljnaBeseda.toUpperCase().split('').join(' - ');
        document.getElementById('mainImage').src = currentWordData.image;
        document.getElementById('mainImage').alt = `Slika za besedo ${ciljnaBeseda}`;
        
        prikaziStatus(`Pritisni gumb in povej natanƒçno: "${ciljnaBeseda.toUpperCase()}"`, '');
        document.getElementById('povratna').style.display = 'none';
        document.getElementById('alternativeInfo').style.display = 'none';
        log(`Nova ciljna beseda: ${ciljnaBeseda}`);
    }

    // Preklopi na naslednjo besedo
    function nextWord() {
        currentWordIndex = (currentWordIndex + 1) % wordList.length;
        updateWordDisplay();
    }

    // INICIALIZACIJA GLASOVNEGA PREPOZNAVANJA
    function inicializirajGlasovnoPrepoznavanje() {
        if ('webkitSpeechRecognition' in window) {
            speechRecognition = new webkitSpeechRecognition();
            speechRecognition.continuous = false;
            speechRecognition.interimResults = false;
            speechRecognition.lang = 'sl-SI';
            speechRecognition.maxAlternatives = 5;
            
            speechRecognition.onstart = function() {
                prikaziStatus('üé§ Poslu≈°am... Povej natanƒçno "' + ciljnaBeseda.toUpperCase() + '"!', 'snemanje');
                onemogociGumb(true);
                log('Snemanje zaƒçeto');
            };
            
            speechRecognition.onend = function() {
                prikaziStatus('Pritisni gumb in povej natanƒçno: "' + ciljnaBeseda.toUpperCase() + '"', '');
                onemogociGumb(false);
                log('Snemanje konƒçano');
            };
            
            speechRecognition.onerror = function(event) {
                log('Napaka: ' + event.error);
                obravnavajNapako(event.error);
                onemogociGumb(false);
            };
            
            speechRecognition.onresult = function(event) {
                vseAlternative = [];
                
                for (let i = 0; i < event.results[0].length; i++) {
                    const alternativa = event.results[0][i];
                    vseAlternative.push({
                        besedilo: alternativa.transcript.toLowerCase().trim(),
                        zaupanje: alternativa.confidence || 0.8
                    });
                }
                
                log(`Vse alternative: ${JSON.stringify(vseAlternative)}`);
                prikaziAlternative(vseAlternative);
                
                const rezultat = najstrozjaAnalizaAlternativ(vseAlternative, ciljnaBeseda);
                prikaziRezultat(rezultat);
            };
            
            log('Najstro≈æji sistem glasovnega prepoznavanja inicializiran');
            prikaziPovratno('‚úÖ Najstro≈æji sistem pripravljen za testiranje!', 'pomoc');
        } else {
            prikaziPovratno('‚ùå Ta brskalnik ne podpira glasovnega prepoznavanja. Uporabite Google Chrome.', 'kriticna');
            log('Brskalnik ne podpira glasovnega prepoznavanja');
        }
    }
    
    // ZAƒåNI SNEMANJE
    function zacniSnemanje() {
        if (!speechRecognition) {
            prikaziPovratno('Glasovno prepoznavanje ni na voljo.', 'kriticna');
            return;
        }
        
        try {
            vseAlternative = [];
            speechRecognition.start();
        } catch (error) {
            log('Napaka pri zagonu: ' + error.message);
            prikaziPovratno('Poskusite znova ƒçez nekaj sekund.', 'pomoc');
        }
    }
    
    // PRIKA≈ΩI VSE ALTERNATIVE
    function prikaziAlternative(alternative) {
        const infoEl = document.getElementById('alternativeInfo');
        const listEl = document.getElementById('alternativeList');
        
        let html = '';
        for (let i = 0; i < alternative.length; i++) {
            const alt = alternative[i];
            html += `${i + 1}. "${alt.besedilo}" (${(alt.zaupanje * 100).toFixed(1)}%)<br>`;
        }
        
        listEl.innerHTML = html;
        infoEl.style.display = 'block';
    }
    
    // NAJSTRO≈ΩJA ANALIZA ALTERNATIV
    function najstrozjaAnalizaAlternativ(alternative, ciljna) {
        ciljna = ciljna.toLowerCase().trim();
        
        log(`=== NAJSTRO≈ΩJA PROFESIONALNA ANALIZA ===`);
        log(`Ciljna beseda: "${ciljna}"`);
        log(`≈†tevilo alternativ: ${alternative.length}`);
        
        let najboljsiRezultat = {
            natancnost: -1,
            tip: 'neprepoznano',
            sporocilo: 'Nisem prepoznal govora.',
            tocke: 0,
            prepoznanaBeseda: '[ni govora]',
            napake: []
        };
        
        for (let i = 0; i < alternative.length; i++) {
            const alt = alternative[i];
            const prepoznanaBeseda = alt.besedilo;
            const zaupanje = alt.zaupanje;
            
            log(`  Analiziram alternativo ${i + 1}: "${prepoznanaBeseda}" (zaupanje: ${zaupanje.toFixed(3)})`);
            
            const ocena = najstrozjaOcena(prepoznanaBeseda, ciljna, zaupanje);
            
            if (ocena.natancnost > najboljsiRezultat.natancnost) {
                najboljsiRezultat = ocena;
                najboljsiRezultat.prepoznanaBeseda = prepoznanaBeseda;
            }
        }
        
        log(`Izbrana najbolj≈°a alternativa: "${najboljsiRezultat.prepoznanaBeseda}" (natanƒçnost: ${najboljsiRezultat.natancnost.toFixed(3)})`);
        log(`===============================`);
        
        return najboljsiRezultat;
    }
    
    // NAJSTRO≈ΩJA OCENA IZGOVORJAVE
    function najstrozjaOcena(prepoznana, ciljna, zaupanje) {
        prepoznana = prepoznana.replace(/[.,!?]/g, '').trim().toLowerCase();
        ciljna = ciljna.replace(/[.,!?]/g, '').trim().toLowerCase();
        
        if (prepoznana === ciljna) {
            log(`    ‚úÖ POPOLNO UJEMANJE! Zaupanje: ${zaupanje.toFixed(3)}`);
            if (zaupanje < 0.7) {
                log(`    ‚ö†Ô∏è Nizko zaupanje API-ja - mo≈æno ugibanje`);
                return {
                    natancnost: zaupanje * 0.9,
                    tip: 'popolno_nizko_zaupanje'
                };
            }
            return {
                natancnost: Math.min(1.0, zaupanje * 1.05),
                tip: 'popolno'
            };
        }
        
        const kriticneNapake = preveriKriticneNapake(prepoznana, ciljna);
        if (kriticneNapake.length > 0) {
            log(`    üö® KRITIƒåNE NAPAKE: ${kriticneNapake.join(', ')}`);
            return {
                natancnost: 0.02,
                tip: 'kriticno',
                napake: kriticneNapake
            };
        }
        
        const podobnost = izracunajPodobnost(prepoznana, ciljna);
        log(`    Podobnost: ${podobnost.toFixed(3)}, Zaupanje: ${zaupanje.toFixed(3)}`);
        
        const koncniRezultat = Math.min(podobnost, zaupanje) * 0.7;
        log(`    Najstro≈æji konƒçni rezultat: ${koncniRezultat.toFixed(3)}`);
        
        return {
            natancnost: koncniRezultat,
            tip: 'podobno'
        };
    }
    
    // PREVERI KRITIƒåNE NAPAKE
    function preveriKriticneNapake(prepoznana, ciljna) {
        const napake = [];
        
        const kriticneZamenjave = {
            '≈æ': ['z', 'j'],
            '≈°': ['s'],
            'ƒç': ['c', 't'],
            'r': ['l'],
            'l': ['r'],
            'v': ['f', 'w', 'b'],
            'f': ['v'],
            'g': ['k'],
            'b': ['p', 'v'],
            'd': ['t'],
            'k': ['g'],
            'p': ['b'],
            't': ['d']
        };
        
        for (let i = 0; i < Math.max(prepoznana.length, ciljna.length); i++) {
            const ciljniGlas = i < ciljna.length ? ciljna.charAt(i) : '';
            const prepoznaniGlas = i < prepoznana.length ? prepoznana.charAt(i) : '';
            
            if (ciljniGlas && kriticneZamenjave[ciljniGlas]) {
                if (kriticneZamenjave[ciljniGlas].includes(prepoznaniGlas)) {
                    napake.push(`"${ciljniGlas.toUpperCase()}" ‚Üí "${prepoznaniGlas.toUpperCase()}"`);
                    log(`      üö® KRITIƒåNA NAPAKA: ${ciljniGlas.toUpperCase()} ‚Üí ${prepoznaniGlas.toUpperCase()}`);
                }
            }
        }
        
        return napake;
    }
    
    // IZRAƒåUNAJ PODOBNOST
    function izracunajPodobnost(s1, s2) {
        const maxLen = Math.max(s1.length, s2.length);
        if (maxLen === 0) return 1;
        
        const razdalja = levenshteinDistance(s1, s2);
        return Math.max(0, 1 - (razdalja / maxLen));
    }
    
    // LEVENSHTEINOVA RAZDALJA
    function levenshteinDistance(s1, s2) {
        const matrix = [];
        
        for (let i = 0; i <= s2.length; i++) {
            matrix[i] = [i];
        }
        
        for (let j = 0; j <= s1.length; j++) {
            matrix[0][j] = j;
        }
        
        for (let i = 1; i <= s2.length; i++) {
            for (let j = 1; j <= s1.length; j++) {
                if (s2.charAt(i - 1) === s1.charAt(j - 1)) {
                    matrix[i][j] = matrix[i - 1][j - 1];
                } else {
                    matrix[i][j] = Math.min(
                        matrix[i - 1][j - 1] + 1,
                        matrix[i][j - 1] + 1,
                        matrix[i - 1][j] + 1
                    );
                }
            }
        }
        
        return matrix[s2.length][s1.length];
    }
    
    // PRIKA≈ΩI REZULTAT z najstro≈æjimi pragovi in avdio povratno informacijo
    function prikaziRezultat(rezultat) {
        const pragPopolnosti = 0.99;
        const pragUspeha = 0.88;
        const pragSpodbude = 0.70;
        const pragPomoƒçi = 0.45;
        
        let cssClass = '';
        let sporocilo = '';
        let tocke = 0;
        let avdioTip = null; // <<< DODANO: Doloƒçitev tipa avdia
        
        if (rezultat.tip === 'kriticno') {
            cssClass = 'kriticna';
            sporocilo = `‚ùå KRITIƒåNA NAPAKA! Sli≈°al sem "${rezultat.prepoznanaBeseda.toUpperCase()}". Napake: ${rezultat.napake ? rezultat.napake.join(', ') : 'neznana napaka'}. V sloven≈°ƒçini so ti glasovi razliƒçni!`;
            tocke = 0;
            avdioTip = 'napaka';
        } else if (rezultat.natancnost >= pragPopolnosti) {
            cssClass = 'uspeh';
            sporocilo = `üéâ ODLIƒåNO! Popolnoma pravilno si izgovoril "${ciljnaBeseda.toUpperCase()}"!`;
            tocke = 30;
            avdioTip = 'uspeh';
        } else if (rezultat.natancnost >= pragUspeha) {
            cssClass = 'uspeh';
            sporocilo = `‚úÖ Zelo dobro! Pravilno si povedal "${ciljnaBeseda.toUpperCase()}".`;
            tocke = 20;
            avdioTip = 'uspeh';
        } else if (rezultat.natancnost >= pragSpodbude) {
            cssClass = 'spodbuda';
            sporocilo = `üí™ Dobro posku≈°a≈°! Sli≈°al sem "${rezultat.prepoznanaBeseda}". Poskusi ≈°e malo jasneje: ${ciljnaBeseda.toUpperCase().split('').join(' - ')}`;
            tocke = 10;
            avdioTip = 'napaka';
        } else if (rezultat.natancnost >= pragPomoƒçi) {
            cssClass = 'pomoc';
            sporocilo = `üéØ Sli≈°al sem "${rezultat.prepoznanaBeseda}". Pozor na izgovorjavo: ${ciljnaBeseda.toUpperCase().split('').join(' - ')}`;
            tocke = 5;
            avdioTip = 'napaka';
        } else {
            cssClass = 'pomoc';
            sporocilo = `üí° Sli≈°al sem "${rezultat.prepoznanaBeseda}". Poglej sliko in poskusi jasno povedati "${ciljnaBeseda.toUpperCase()}".`;
            tocke = 2;
            avdioTip = 'napaka';
        }
        
        prikaziPovratno(sporocilo, cssClass);
        dodajTocke(tocke);
        
        // PREDVAJAJ USTREZEN ZVOK <<< DODANO: Avdio povratna informacija
        if (avdioTip) predvajajAvdio(avdioTip);
        
        log(`Rezultat: ${rezultat.tip}, Toƒçke: ${tocke}, Natanƒçnost: ${(rezultat.natancnost*100).toFixed(1)}%`);
    }
    
    // POMO≈ΩNE FUNKCIJE ZA UI
    function prikaziStatus(besedilo, cssClass) {
        const statusEl = document.getElementById('status');
        statusEl.innerHTML = besedilo;
        statusEl.className = 'status ' + cssClass;
    }
    
    function prikaziPovratno(besedilo, cssClass) {
        const povratnaEl = document.getElementById('povratna');
        povratnaEl.innerHTML = besedilo;
        povratnaEl.className = 'povratna ' + cssClass;
        povratnaEl.style.display = 'block';
    }
    
    function onemogociGumb(onemogoci) {
        const gumb = document.getElementById('gumbGovori');
        gumb.disabled = onemogoci;
        gumb.innerHTML = onemogoci ? '‚è≥ Poslu≈°am...' : 'üé§ Zaƒçni govoriti';
    }
    
    function dodajTocke(noveTocke) {
        trenutneTocke += noveTocke;
        document.getElementById('tocke').textContent = trenutneTocke;
    }
    
    function obravnavajNapako(napaka) {
        let sporocilo = '';
        switch (napaka) {
            case 'not-allowed':
                sporocilo = '‚ùå Dostop do mikrofona je zavrnjen. Dovolite dostop in osve≈æite stran.';
                break;
            case 'no-speech':
                sporocilo = 'üí° Nisem sli≈°al govora. Poskusite znova in govorite glasneje.';
                break;
            case 'audio-capture':
                sporocilo = '‚ùå Mikrofon ni na voljo. Preverite, ali je prikljuƒçen.';
                break;
            case 'network':
                sporocilo = '‚ùå Te≈æava z internetno povezavo. Preverite povezavo.';
                break;
            default:
                sporocilo = '‚ùå Pri≈°lo je do napake. Poskusite znova!';
        }
        prikaziPovratno(sporocilo, 'kriticna');
    }
    
    function log(sporocilo) {
        console.log('[GovornaVaja] ' + sporocilo);
        if (debugMode) {
            const debugEl = document.getElementById('debug');
            const cas = new Date().toLocaleTimeString();
            debugEl.innerHTML += `[${cas}] ${sporocilo}<br>`;
            debugEl.scrollTop = debugEl.scrollHeight;
        }
    }
    
    // JAVNE FUNKCIJE ZA GUMBE
    function ponoviVajo() {
        document.getElementById('povratna').style.display = 'none';
        document.getElementById('alternativeInfo').style.display = 'none';
        prikaziStatus(`Pritisni gumb in povej natanƒçno: "${ciljnaBeseda.toUpperCase()}"`, '');
        log('Vaja ponastavljena');
    }
    
    function prikaziPomoc() {
        alert(`üöó NAVODILA ZA NAJSTRO≈ΩJE TESTIRANJE:

1. Poglej sliko ${ciljnaBeseda}
2. Pritisni "Zaƒçni govoriti"  
3. Ko vidi≈° "Poslu≈°am...", jasno povej "${ciljnaBeseda.toUpperCase()}"
4. Poƒçakaj na povratno informacijo

‚ö†Ô∏è NAJSTRO≈ΩJE PROFESIONALNO PREVERJANJE:
‚Ä¢ Sistem NE bo sprejel "AFTO" namesto "AVTO" (tudi pri hitri izgovorjavi!)
‚Ä¢ Sistem NE bo sprejel "ZOGA" namesto "≈ΩOGA"
‚Ä¢ Sistem NE bo sprejel "LIBA" namesto "RIBA"
‚Ä¢ Izgovorjava mora biti natanƒçna za vse glasove

üí° TESTIRANJE KRITIƒåNIH NAPAK:
‚Ä¢ Poskusite reƒçi "AFTO" - sistem bo opozoril na V‚ÜíF napako
‚Ä¢ Poskusite reƒçi "ZOGA" - sistem bo opozoril na ≈Ω‚ÜíZ napako
‚Ä¢ Poskusite reƒçi "LIBA" - sistem bo opozoril na R‚ÜíL napako

üîß ƒåE NE DELUJE:
‚Ä¢ Uporabite Google Chrome
‚Ä¢ Dovolite dostop do mikrofona
‚Ä¢ Preverite internetno povezavo
‚Ä¢ Kliknite "Debug" za podrobnosti

Trenutna beseda: ${ciljnaBeseda.toUpperCase()}`);
    }
    
    function toggleDebug() {
        debugMode = !debugMode;
        const debugEl = document.getElementById('debug');
        debugEl.style.display = debugMode ? 'block' : 'none';
        if (debugMode) {
            debugEl.innerHTML = '<strong>Debug informacije:</strong><br>';
            log('Debug naƒçin vklopljen');
        } else {
            log('Debug naƒçin izklopljen');
        }
    }
</script>
</body>
</html>
