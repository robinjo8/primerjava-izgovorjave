<!DOCTYPE html>
<html lang="sl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöó Profesionalna govorna vaja - Najstro≈æja ocena</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            text-align: center;
        }
        
        .container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            margin: 20px 0;
        }
        
        h1 {
            color: white;
            font-size: 32px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            margin-bottom: 30px;
        }
        
        .slika {
            max-width: 300px;
            max-height: 300px;
            width: 100%;
            height: auto;
            border: 4px solid #2196F3;
            border-radius: 15px;
            margin: 20px auto;
            transition: transform 0.3s ease;
            display: block;
        }
        
        .slika:hover { transform: scale(1.05); }
        
        .beseda {
            font-size: 36px;
            color: #2196F3;
            font-weight: bold;
            margin: 20px 0;
            letter-spacing: 2px;
        }
        
        .glasovi {
            font-size: 24px;
            color: #666;
            margin: 15px 0;
            font-family: monospace;
            background: #f5f5f5;
            padding: 10px;
            border-radius: 8px;
        }
        
        .gumb {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 18px 35px;
            font-size: 20px;
            border-radius: 25px;
            cursor: pointer;
            margin: 20px;
            transition: all 0.3s ease;
            font-weight: bold;
        }
        
        .gumb:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
        }
        
        .gumb:disabled {
            background: #cccccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .status {
            font-size: 18px;
            margin: 20px 0;
            min-height: 25px;
            font-weight: bold;
        }
        
        .snemanje {
            color: #f44336;
            animation: blink 1s infinite;
        }
        
        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.5; }
        }
        
        .povratna {
            font-size: 16px;
            padding: 15px;
            margin: 20px 0;
            border-radius: 10px;
            min-height: 20px;
            font-weight: bold;
        }
        
        .uspeh {
            background: #d4edda;
            color: #155724;
            border: 3px solid #28a745;
            animation: bounce 0.6s ease;
        }
        
        .spodbuda {
            background: #fff3cd;
            color: #856404;
            border: 3px solid #ffc107;
        }
        
        .pomoc {
            background: #cce7ff;
            color: #004085;
            border: 3px solid #007bff;
        }
        
        .kriticna {
            background: #ffe6e6;
            color: #8b0000;
            border: 3px solid #ff0000;
            animation: shake 0.5s ease-in-out;
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        
        .tocke {
            background: #FF9800;
            color: white;
            padding: 12px;
            border-radius: 10px;
            margin: 20px 0;
            font-size: 18px;
            font-weight: bold;
        }
        
        .gumb-mali {
            background: #2196F3;
            color: white;
            border: none;
            padding: 8px 16px;
            font-size: 14px;
            border-radius: 15px;
            cursor: pointer;
            margin: 5px;
        }
        
        .gumb-mali:hover { background: #1976D2; }
        
        .debug {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 10px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 12px;
            text-align: left;
            max-height: 300px;
            overflow-y: auto;
            display: none;
        }
        
        .alternative-info {
            background: #e3f2fd;
            border: 2px solid #2196f3;
            border-radius: 8px;
            padding: 10px;
            margin: 10px 0;
            font-size: 14px;
            text-align: left;
        }
        
        .opozorilo {
            background: #e8f5e8;
            color: #2e7d32;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            font-size: 14px;
            border: 2px solid #4caf50;
        }
        
        .tehnicno {
            background: #fff3cd;
            color: #856404;
            padding: 12px;
            border-radius: 8px;
            margin: 15px 0;
            font-size: 12px;
            border: 2px solid #ffc107;
        }
    </style>
</head>
<body>
    <h1>üöó Profesionalna govorna vaja - Najstro≈æja ocena</h1>
    
    <div class="container">
        <p><strong>Poglej sliko in povej natanƒçno, kaj vidi≈°:</strong></p>
        
        <img class="slika" 
             id="mainImage"
             src="https://i.postimg.cc/3JH3jT3S/avto.png" 
             alt="Slika avtomobila" />
        
        <div class="beseda" id="ciljnaBesedaDisplay">AVTO</div>
        <div class="glasovi" id="glasoviDisplay">A - V - T - O</div>
        
        <div class="status" id="status">Pritisni gumb in povej natanƒçno: "AVTO"</div>
        
        <button class="gumb" id="gumbGovori" onclick="zacniSnemanje()">
            üé§ Zaƒçni govoriti
        </button>
        
        <div class="povratna" id="povratna" style="display: none;"></div>
        
        <div id="alternativeInfo" class="alternative-info" style="display: none;">
            <strong>Vse prepoznane mo≈ænosti:</strong><br>
            <span id="alternativeList"></span>
        </div>
        
        <div class="tocke">
            Toƒçke: <span id="tocke">0</span> üåü
        </div>
        
        <div>
            <button class="gumb-mali" onclick="ponoviVajo()">üîÑ Znova</button>
            <button class="gumb-mali" onclick="prikaziPomoc()">üí° Pomoƒç</button>
            <button class="gumb-mali" onclick="toggleDebug()">üîß Debug</button>
            <button class="gumb-mali" onclick="nextWord()">‚û°Ô∏è Naslednja beseda</button>
        </div>
        
        <div class="debug" id="debug"></div>
        
        <div class="opozorilo">
            ‚úÖ <strong>NAJSTRO≈ΩJE profesionalno preverjanje:</strong><br>
            ‚Ä¢ Analizira VSE alternative Google Speech API<br>
            ‚Ä¢ Razlikuje med V in F (avto ‚â† afto) - tudi pri hitri izgovorjavi<br>
            ‚Ä¢ Razlikuje med ≈Ω in Z (≈æoga ‚â† zoga)<br>
            ‚Ä¢ Razlikuje med ≈† in S (≈°ola ‚â† sola)<br>  
            ‚Ä¢ Razlikuje med R in L (riba ‚â† liba)<br>
            ‚Ä¢ Upo≈°teva zaupanje Google API in podobnost besed
        </div>
        
        <div class="tehnicno">
            ‚ö†Ô∏è <strong>Tehniƒçne zahteve:</strong> Google Chrome + dovoljenje za mikrofon + internetna povezava
        </div>
    </div>

    <script>
    // ================= AVDIO PODPORA =================
    let audioPravilno = null;
    let audioNapacno = null;
    let audioEnabled = true;

    function inicializirajAvdio() {
        audioPravilno = new Audio('https://primerjava-izgovorjave.onrender.com/audio/avto_pravilno.mp3');
        audioNapacno = new Audio('https://primerjava-izgovorjave.onrender.com/audio/avto_napacno.mp3');
        audioPravilno.preload = 'auto';
        audioNapacno.preload = 'auto';
        audioPravilno.volume = 0.7;
        audioNapacno.volume = 0.7;
        log('Avdio datoteke inicializirane');
    }

    function predvajajAvdio(tip) {
        if (!audioEnabled) return;
        if (tip === 'uspeh' && audioPravilno) {
            audioPravilno.currentTime = 0;
            audioPravilno.play().catch(e => log('Napaka pri predvajanju avdia "uspeh": ' + e.message));
        }
        if (tip === 'napaka' && audioNapacno) {
            audioNapacno.currentTime = 0;
            audioNapacno.play().catch(e => log('Napaka pri predvajanju avdia "napaka": ' + e.message));
        }
    }
    // =================================================

    // Globalne spremenljivke
    let speechRecognition = null;
    let trenutneTocke = 0;
    let ciljnaBeseda = '';
    let debugMode = false;
    let vseAlternative = [];
    
    let currentWordIndex = 0;
    const wordList = [
        { 
            word: 'avto', 
            image: 'https://i.postimg.cc/3JH3jT3S/avto.png',
            napacneIzgovorjave: ['afto', 'ato', 'avdo', 'avko', 'avgo', 'avso', 'avco', 'avt', 'avo', 'auto', 'arto', 'alto', 'asto', 'acto', 'anto', 'apto', 'abto', 'akto', 'agto', 'awto']
        },
        { 
            word: '≈æoga', 
            image: 'https://via.placeholder.com/300x300/4CAF50/white?text=≈ΩOGA',
            napacneIzgovorjave: ['zoga', 'joga', 'soga', 'toga', 'goga', '≈æoka', '≈æopa', '≈æoba', '≈æoda', '≈æota', '≈æosa', '≈æoca', '≈æog', '≈æo', 'soga', 'cola', 'hoga']
        },
        { 
            word: 'riba', 
            image: 'https://via.placeholder.com/300x300/2196F3/white?text=RIBA',
            napacneIzgovorjave: ['liba', 'fiba', 'viba', 'piba', 'biba', 'tiba', 'diba', 'ripa', 'rita', 'rika', 'risa', 'rica', 'rib', 'ri', 'lipa', 'riva', 'ribo']
        },
        { 
            word: '≈°ola', 
            image: 'https://via.placeholder.com/300x300/FF9800/white?text=≈†OLA',
            napacneIzgovorjave: ['sola', 'cola', 'tola', 'fola', 'hola', 'pola', 'bola', '≈°oka', '≈°opa', '≈°oba', '≈°oda', '≈°ota', '≈°ol', '≈°o', 'sola', '≈°ole']
        },
        { 
            word: 'ƒçebela', 
            image: 'https://via.placeholder.com/300x300/9C27B0/white?text=ƒåEBELA',
            napacneIzgovorjave: ['cebela', 'tebela', 'sebela', 'febela', 'hebela', 'pebela', 'ƒçepela', 'ƒçetela', 'ƒçekela', 'ƒçesela', 'ƒçecela', 'ƒçebla', 'ƒçbelja', 'cebla']
        }
    ];

    // Inicializacija ob nalaganju strani
    window.onload = function() {
        log('Stran nalo≈æena - inicializacija striktnega sistema...');
        inicializirajAvdio();
        inicializirajGlasovnoPrepoznavanje();
        updateWordDisplay();
    };
    
    function updateWordDisplay() {
        const currentWordData = wordList[currentWordIndex];
        ciljnaBeseda = currentWordData.word;
        
        document.getElementById('ciljnaBesedaDisplay').textContent = ciljnaBeseda.toUpperCase();
        document.getElementById('glasoviDisplay').textContent = ciljnaBeseda.toUpperCase().split('').join(' - ');
        document.getElementById('mainImage').src = currentWordData.image;
        document.getElementById('mainImage').alt = `Slika za besedo ${ciljnaBeseda}`;
        
        prikaziStatus(`Pritisni gumb in povej natanƒçno: "${ciljnaBeseda.toUpperCase()}"`, '');
        document.getElementById('povratna').style.display = 'none';
        document.getElementById('alternativeInfo').style.display = 'none';
        log(`Nova ciljna beseda: ${ciljnaBeseda}`);
    }

    function nextWord() {
        currentWordIndex = (currentWordIndex + 1) % wordList.length;
        updateWordDisplay();
    }

    // INICIALIZACIJA GLASOVNEGA PREPOZNAVANJA
    function inicializirajGlasovnoPrepoznavanje() {
        if ('webkitSpeechRecognition' in window) {
            speechRecognition = new webkitSpeechRecognition();
            speechRecognition.continuous = false;
            speechRecognition.interimResults = false;
            speechRecognition.lang = 'sl-SI';
            speechRecognition.maxAlternatives = 10; // Veƒç alternativ za bolj≈°o analizo
            
            speechRecognition.onstart = function() {
                prikaziStatus('üé§ Poslu≈°am... Povej natanƒçno "' + ciljnaBeseda.toUpperCase() + '"!', 'snemanje');
                onemogociGumb(true);
                log('Snemanje zaƒçeto');
            };
            
            speechRecognition.onend = function() {
                prikaziStatus('Pritisni gumb in povej natanƒçno: "' + ciljnaBeseda.toUpperCase() + '"', '');
                onemogociGumb(false);
                log('Snemanje konƒçano');
            };
            
            speechRecognition.onerror = function(event) {
                log('Napaka: ' + event.error);
                obravnavajNapako(event.error);
                onemogociGumb(false);
            };
            
            speechRecognition.onresult = function(event) {
                vseAlternative = [];
                
                for (let i = 0; i < event.results[0].length; i++) {
                    const alternativa = event.results[0][i];
                    vseAlternative.push({
                        besedilo: alternativa.transcript.toLowerCase().trim(),
                        zaupanje: alternativa.confidence || null
                    });
                }
                
                log(`Vse alternative: ${JSON.stringify(vseAlternative)}`);
                prikaziAlternative(vseAlternative);
                
                const rezultat = striktnaAnalizaIzgovorjave(vseAlternative, ciljnaBeseda);
                prikaziRezultat(rezultat);
            };
            
            log('Striktni sistem glasovnega prepoznavanja inicializiran');
            prikaziPovratno('‚úÖ Striktni sistem pripravljen za logopedske vaje!', 'pomoc');
        } else {
            prikaziPovratno('‚ùå Ta brskalnik ne podpira glasovnega prepoznavanja. Uporabite Google Chrome.', 'kriticna');
            log('Brskalnik ne podpira glasovnega prepoznavanja');
        }
    }
    
    function zacniSnemanje() {
        if (!speechRecognition) {
            prikaziPovratno('Glasovno prepoznavanje ni na voljo.', 'kriticna');
            return;
        }
        
        try {
            vseAlternative = [];
            speechRecognition.start();
        } catch (error) {
            log('Napaka pri zagonu: ' + error.message);
            prikaziPovratno('Poskusite znova ƒçez nekaj sekund.', 'pomoc');
        }
    }
    
    function prikaziAlternative(alternative) {
        const infoEl = document.getElementById('alternativeInfo');
        const listEl = document.getElementById('alternativeList');
        
        let html = '';
        for (let i = 0; i < alternative.length; i++) {
            const alt = alternative[i];
            const zaupanjeText = alt.zaupanje !== null ? (alt.zaupanje * 100).toFixed(1) + '%' : 'N/A';
            html += `${i + 1}. "${alt.besedilo}" (${zaupanjeText})<br>`;
        }
        
        listEl.innerHTML = html;
        infoEl.style.display = 'block';
    }
    
    // KLJUƒåNA FUNKCIJA: STRIKTNA ANALIZA IZGOVORJAVE
    function striktnaAnalizaIzgovorjave(alternative, ciljna) {
        ciljna = ciljna.toLowerCase().trim();
        const currentWordData = wordList[currentWordIndex];
        
        log(`=== STRIKTNA ANALIZA IZGOVORJAVE ===`);
        log(`Ciljna beseda: "${ciljna}"`);
        log(`≈†tevilo alternativ: ${alternative.length}`);
        
        // KORAK 1: Preverimo vse alternative za POPOLNO ujemanje
        for (let i = 0; i < alternative.length; i++) {
            const alt = alternative[i];
            const prepoznanaBeseda = alt.besedilo.replace(/[.,!?]/g, '').trim().toLowerCase();
            
            log(`  Preverjam alternativo ${i + 1}: "${prepoznanaBeseda}"`);
            
            if (prepoznanaBeseda === ciljna) {
                log(`    ‚úÖ POPOLNO UJEMANJE NAJDENO!`);
                return {
                    natancnost: 1.0,
                    tip: 'popolno',
                    prepoznanaBeseda: prepoznanaBeseda,
                    sporocilo: `Odliƒçno! Pravilno si povedal "${ciljna.toUpperCase()}"`
                };
            }
        }
        
        // KORAK 2: ƒåe ni popolnega ujemanja, analiziraj najbolj≈°o alternativo
        const najboljsaAlternativa = alternative[0];
        const prepoznana = najboljsaAlternativa.besedilo.replace(/[.,!?]/g, '').trim().toLowerCase();
        
        log(`  Najbolj≈°a alternativa za analizo: "${prepoznana}"`);
        
        // KORAK 3: Preverimo znane napaƒçne izgovorjave
        if (currentWordData.napacneIzgovorjave && currentWordData.napacneIzgovorjave.includes(prepoznana)) {
            log(`    üö® ZNANA NAPAƒåNA IZGOVORJAVA: "${prepoznana}"`);
            return {
                natancnost: 0.0,
                tip: 'znana_napaka',
                prepoznanaBeseda: prepoznana,
                sporocilo: `Tipiƒçna napaka! Sli≈°al sem "${prepoznana.toUpperCase()}", pravilno je "${ciljna.toUpperCase()}"`
            };
        }
        
        // KORAK 4: Preverimo kritiƒçne fonetiƒçne napake
        const kriticneNapake = preveriKriticneNapake(prepoznana, ciljna);
        if (kriticneNapake.length > 0) {
            log(`    üö® KRITIƒåNE FONETIƒåNE NAPAKE: ${kriticneNapake.join(', ')}`);
            return {
                natancnost: 0.01,
                tip: 'kriticno',
                prepoznanaBeseda: prepoznana,
                napake: kriticneNapake
            };
        }
        
        // KORAK 5: Ostale napake
        log(`    ‚ùå OSTALA NAPAKA`);
        return {
            natancnost: 0.05,
            tip: 'napaka',
            prepoznanaBeseda: prepoznana,
            sporocilo: `Nisem razumel pravilno. Poskusi jasneje povedati "${ciljna.toUpperCase()}"`
        };
    }
    
    function preveriKriticneNapake(prepoznana, ciljna) {
        const napake = [];
        
        const kriticneZamenjave = {
            '≈æ': ['z', 'j'],
            '≈°': ['s'],
            'ƒç': ['c', 't'],
            'r': ['l'],
            'l': ['r'],
            'v': ['f', 'w', 'b'],
            'f': ['v'],
            'g': ['k'],
            'b': ['p', 'v'],
            'd': ['t'],
            'k': ['g'],
            'p': ['b'],
            't': ['d']
        };
        
        for (let i = 0; i < Math.max(prepoznana.length, ciljna.length); i++) {
            const ciljniGlas = i < ciljna.length ? ciljna.charAt(i) : '';
            const prepoznaniGlas = i < prepoznana.length ? prepoznana.charAt(i) : '';
            
            if (ciljniGlas && kriticneZamenjave[ciljniGlas]) {
                if (kriticneZamenjave[ciljniGlas].includes(prepoznaniGlas)) {
                    napake.push(`"${ciljniGlas.toUpperCase()}" ‚Üí "${prepoznaniGlas.toUpperCase()}"`);
                    log(`      üö® KRITIƒåNA NAPAKA: ${ciljniGlas.toUpperCase()} ‚Üí ${prepoznaniGlas.toUpperCase()}`);
                }
            }
        }
        
        return napake;
    }
    
    // PRIKAZ REZULTATA Z ABSOLUTNO STRIKTNOSTJO
    function prikaziRezultat(rezultat) {
        let cssClass = '';
        let sporocilo = '';
        let tocke = 0;
        let avdioTip = 'napaka'; // Privzeto napaka, spremeni se samo za popolno ujemanje
        
        if (rezultat.tip === 'popolno') {
            // EDINI NAƒåIN ZA USPEH = POPOLNO UJEMANJE
            cssClass = 'uspeh';
            sporocilo = `üéâ ODLIƒåNO! Popolnoma pravilno si izgovoril "${ciljnaBeseda.toUpperCase()}"!`;
            tocke = 30;
            avdioTip = 'uspeh';
            log(`‚úÖ POPOLNA IZGOVORJAVA - predvajam pozitivni zvok`);
        } else if (rezultat.tip === 'znana_napaka') {
            cssClass = 'kriticna';
            sporocilo = `‚ùå TIPIƒåNA NAPAKA! Sli≈°al sem "${rezultat.prepoznanaBeseda.toUpperCase()}", pravilno je "${ciljnaBeseda.toUpperCase()}". Pozor na glasove: ${ciljnaBeseda.toUpperCase().split('').join(' - ')}`;
            tocke = 0;
            avdioTip = 'napaka';
            log(`‚ùå ZNANA NAPAƒåNA IZGOVORJAVA - predvajam negativni zvok`);
        } else if (rezultat.tip === 'kriticno') {
            cssClass = 'kriticna';
            sporocilo = `‚ùå KRITIƒåNA NAPAKA! Sli≈°al sem "${rezultat.prepoznanaBeseda.toUpperCase()}". Napake: ${rezultat.napake ? rezultat.napake.join(', ') : 'fonetiƒçna napaka'}. V sloven≈°ƒçini so ti glasovi razliƒçni!`;
            tocke = 0;
            avdioTip = 'napaka';
            log(`‚ùå KRITIƒåNA FONETIƒåNA NAPAKA - predvajam negativni zvok`);
        } else {
            cssClass = 'pomoc';
            sporocilo = `üí° Sli≈°al sem "${rezultat.prepoznanaBeseda}". Poglej sliko in poskusi jasno povedati "${ciljnaBeseda.toUpperCase()}": ${ciljnaBeseda.toUpperCase().split('').join(' - ')}`;
            tocke = 1;
            avdioTip = 'napaka';
            log(`‚ùå OSTALA NAPAKA - predvajam negativni zvok`);
        }
        
        prikaziPovratno(sporocilo, cssClass);
        dodajTocke(tocke);
        
        // PREDVAJAJ USTREZEN ZVOK
        log(`üîä Predvajam avdio: ${avdioTip}`);
        predvajajAvdio(avdioTip);
        
        log(`Konƒçni rezultat: ${rezultat.tip}, Toƒçke: ${tocke}, Natanƒçnost: ${(rezultat.natancnost*100).toFixed(1)}%`);
        log(`===============================`);
    }
    
    // Ostale pomo≈æne funkcije
    function prikaziStatus(besedilo, cssClass) {
        const statusEl = document.getElementById('status');
        statusEl.innerHTML = besedilo;
        statusEl.className = 'status ' + cssClass;
    }
    
    function prikaziPovratno(besedilo, cssClass) {
        const povratnaEl = document.getElementById('povratna');
        povratnaEl.innerHTML = besedilo;
        povratnaEl.className = 'povratna ' + cssClass;
        povratnaEl.style.display = 'block';
    }
    
    function onemogociGumb(onemogoci) {
        const gumb = document.getElementById('gumbGovori');
        gumb.disabled = onemogoci;
        gumb.innerHTML = onemogoci ? '‚è≥ Poslu≈°am...' : 'üé§ Zaƒçni govoriti';
    }
    
    function dodajTocke(noveTocke) {
        trenutneTocke += noveTocke;
        document.getElementById('tocke').textContent = trenutneTocke;
    }
    
    function obravnavajNapako(napaka) {
        let sporocilo = '';
        switch (napaka) {
            case 'not-allowed':
                sporocilo = '‚ùå Dostop do mikrofona je zavrnjen. Dovolite dostop in osve≈æite stran.';
                break;
            case 'no-speech':
                sporocilo = 'üí° Nisem sli≈°al govora. Poskusite znova in govorite glasneje.';
                break;
            case 'audio-capture':
                sporocilo = '‚ùå Mikrofon ni na voljo. Preverite, ali je prikljuƒçen.';
                break;
            case 'network':
                sporocilo = '‚ùå Te≈æava z internetno povezavo. Preverite povezavo.';
                break;
            default:
                sporocilo = '‚ùå Pri≈°lo je do napake. Poskusite znova!';
        }
        prikaziPovratno(sporocilo, 'kriticna');
    }
    
    function log(sporocilo) {
        console.log('[LogopedVaja] ' + sporocilo);
        if (debugMode) {
            const debugEl = document.getElementById('debug');
            const cas = new Date().toLocaleTimeString();
            debugEl.innerHTML += `[${cas}] ${sporocilo}<br>`;
            debugEl.scrollTop = debugEl.scrollHeight;
        }
    }
    
    function ponoviVajo() {
        document.getElementById('povratna').style.display = 'none';
        document.getElementById('alternativeInfo').style.display = 'none';
        prikaziStatus(`Pritisni gumb in povej natanƒçno: "${ciljnaBeseda.toUpperCase()}"`, '');
        log('Vaja ponastavljena');
    }
    
    function prikaziPomoc() {
        const trenutneBesedePodatki = wordList[currentWordIndex];
        const napacneZaCiljno = trenutneBesedePodatki.napacneIzgovorjave || [];
        const napacneString = napacneZaCiljno.slice(0, 8).join(', ');
        
        alert(`üéØ STRIKTNO TESTIRANJE IZGOVORJAVE:

Trenutna beseda: ${ciljnaBeseda.toUpperCase()}

‚úÖ PRAVILNO: Sistem sprejme SAMO "${ciljnaBeseda.toUpperCase()}"

‚ùå NAPAƒåNO: Sistem zavrne vse ostale izgovorjave, vkljuƒçno:
${napacneString}${napacneZaCiljno.length > 8 ? '...' : ''}

üé§ KAKO DELUJE:
1. Pritisni "Zaƒçni govoriti"
2. Jasno povej "${ciljnaBeseda.toUpperCase()}"
3. Sistem preveri vse alternative
4. ƒåe SE KATERA KOLI alternativa popolnoma ujema = USPEH ‚úÖ
5. ƒåe se NOBENA ne ujema popolnoma = NAPAKA ‚ùå

üîä ZVOƒåNI SIGNALI:
‚Ä¢ Pozitiven zvok = SAMO popolno ujemanje
‚Ä¢ Negativen zvok = Vse ostalo (vkljuƒçno "afto", "ato", itd.)

üí° TESTIRANJE:
‚Ä¢ Poskusite reƒçi "${ciljnaBeseda}" - pozitiven zvok
‚Ä¢ Poskusite reƒçi "afto" - negativen zvok
‚Ä¢ Poskusite reƒçi "ato" - negativen zvok

Sistem je zasnovan za logopedske vaje - zahteva popolno natanƒçnost!`);
    }
    
    function toggleDebug() {
        debugMode = !debugMode;
        const debugEl = document.getElementById('debug');
        debugEl.style.display = debugMode ? 'block' : 'none';
        if (debugMode) {
            debugEl.innerHTML = '<strong>Debug informacije:</strong><br>';
            log('Debug naƒçin vklopljen');
        } else {
            log('Debug naƒçin izklopljen');
        }
    }
</script>
</body>
</html>
